<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Homestay App</title>
    <style>
        /* ... (previous styles remain unchanged) ... */
    </style>
</head>
<body>
    <div class="container">
        <h1>My Homestay App</h1>
        <p>Current date and time: <span id="datetime"></span></p>

        <div class="checklist">
            <h2>Cleaning Item Checklist:</h2>
            <ul id="checklistItems">
                <!-- Checklist items will be dynamically added here -->
            </ul>
        </div>

        <div class="notes-input">
            <label for="notes">Nota Tambahan:</label>
            <input type="text" id="notes" name="notes" placeholder="Masukkan nota tambahan di sini...">
        </div>

        <div class="submit-button">
            <button onclick="generateCSV()">Submit and Download CSV</button>
        </div>
    </div>

    <script>
        const items = [
            { name: "Toilet paper", min: 0, max: 60, step: 1 },
            { name: "Plastik L", min: 0, max: 60, step: 1 },
            { name: "Plastik S", min: 0, max: 200, step: 1 },
            { name: "Detergent", min: 0, max: 2, step: 0.1 },
            { name: "Febreeze", min: 0, max: 8, step: 0.1 },
            { name: "Sunlight Pinggan", min: 0, max: 99.99, step: 0.01 },
            { name: "Clorox", min: 0, max: 4, step: 0.1 },
            { name: "Ajax", min: 0, max: 2, step: 0.1 },
            { name: "Shampoo Purple", min: 0, max: 2, step: 0.1 },
            { name: "Shampoo Biru", min: 0, max: 2, step: 0.1 }
        ];

        // ... (previous functions remain unchanged) ...

        function generateCSV() {
            let csvContent = "data:text/csv;charset=utf-8,";
            
            // Add date and time
            const now = new Date();
            const dateStr = now.toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' });
            const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
            
            csvContent += `Date,${dateStr}\n`;
            csvContent += `Time,${timeStr}\n\n`;
            
            csvContent += "Item,Quantity,Checked\n";

            items.forEach((item, index) => {
                const quantity = document.getElementById(`quantity${index}`).value;
                const checked = document.getElementById(`item${index}`).checked ? "Yes" : "No";
                csvContent += `${item.name},${quantity},${checked}\n`;
            });

            const notes = document.getElementById('notes').value;
            csvContent += `\nNotes,${notes}`;

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `checklist_data_${dateStr.replace(/\//g, '-')}_${timeStr.replace(/:/g, '-')}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Initialize the checklist and update the date and time
        initializeChecklist();
        updateDateTime();
        setInterval(updateDateTime, 1000);
    </script>
</body>
</html>
